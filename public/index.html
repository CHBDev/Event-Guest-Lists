<!doctype html>
<html ng-app="theClient">
  <head>
    <title>Event Guest Lists</title>
    <link rel="stylesheet" type="text/css" href="./main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  </head>
  <body ng-controller="ClientController" ng-cloak>

    <div class="nav group" ng-controller="NavController">
      <div class="appTitle">Event Guest Lists</div><div> | USER: {{users.currentUsername}}</div>
      <button id="mainMenuButton" ng-click="toggleMainMenu()">{{menuIsOpen ? "CLOSE" : "MENU"}}</button>

      <div ng-show="menuIsOpen">
        <div id="mainMenu" >

          <div ng-show="users.currentUsername !== null">
            <div id="mainMenuProfileButton">{{users.currentUsername}}</div>
            <div id="mainMenuLogoutButton">LOGOUT</div>
          </div>

          <div id="mainMenuHelp">HELP</div>
          <div id="mainMenuAccount">ACCOUNT</div>
          <div id="mainMenuChangeGroup">CHANGE GROUP</div>

        </div>
      </div>

    </div>
    <div class="navPush"></div>

      <div ng-controller="UserController">

          <div class="loginBar" ng-if="users.currentUsername === null">

              <form name="loginFormHere" novalidate class="css-form" ng-submit="loginFormHere.$valid && (createUserOpen ? passwordsMatch() && create(loginFormHere) : login(loginFormHere))">
                Email: <input type="email" name="email" ng-model="loginFormData.email" required/>
                Password: <input type="password" name="password" ng-model="loginFormData.password" ng-pattern="/^(?=.*\d)(?=.*[a-zA-Z]).{6,36}$/" required/>
                <div class="loginBarConfirm" ng-show="createUserOpen === true">
                Confirm: <input type="password" name="confirm" ng-model="loginFormData.confirm" ng-required="{{createUserOpen ? 'true'  : 'false' }}" login-password="{{loginFormData.password}}" login-confirm="{{loginFormData.confirm}}" login-open="{{createUserOpen}}" />
                </div>

                <input type="button" ng-click="toggleLoginCreate()" value="{{createUserOpen ? 'already have account' : 'create new account' }}" />

                <input class="{{loginFormHere.$valid ? 'enabled' : 'disabled'}}" type="submit" value="{{createUserOpen ? 'create' : 'login'}}"/>

                <div id="loginBarError">

                   <span class="error" ng-show="loginFormHere.email.$error['email']">- Not a valid email address! - </span>
                   <span class="error" ng-show="loginFormHere.password.$error.pattern && !loginFormHere.email.$error['email']">
                   - Password must be > 6 characters and contain a letter and a number - </span>
                   <span class="error" ng-show="(loginFormData.password != loginFormData.confirm) && createUserOpen && !loginFormHere.password.$error.pattern && !loginFormHere.email.$error['email']">
                     - Passwords do not match - </span>

              </div>
              </form>
          </div>

          <div ng-show="users.currentUsername" id="mainView">
            <div id="mainViewPrimary" ng-controller="PrimaryController">
              <tabs-view></tabs-view>
              <!-- <div id="toolBarPrimary" class="toolBar">
                <div ng-hide="events.primary.currentEvent" class="groupTabButton tabButton" ng-click="changePrimaryTab('group')">GROUP</div>
                <div ng-show="groups.primary.currentGroup" class="eventsTabButton tabButton" ng-click="changePrimaryTab('events')">EVENTS</div>
                <div ng-show="groups.primary.currentGroup" class="listsTabButton tabButton" ng-click="changePrimaryTab('lists')">LISTS</div>
                <div class="messagesTabButton tabButton" ng-click="changePrimaryTab('messages')">MESSAGES</div>
              </div>

              <div id="selectedGroupPrimary"  ng-show="groups.primary.currentGroup">
              {{groups.primary.currentGroup}}<span class="closeSelection"><button ng-click="dispatch.primary.currentTab = 'group'; groups.primary.currentGroup = null; events.primary.currentEvent = null; lists.primary.currentList = null">X</button></span>
              </div>
              <div id="selectedEventPrimary"  ng-show="events.primary.currentEvent">
              {{events.primary.currentEvent}}<span class="closeSelection"><button ng-click="events.primary.currentEvent = null; lists.primary.currentList = null">X</button></span>
              </div>
               <div id="selectedListPrimary"  ng-show="lists.primary.currentList">

              {{lists.primary.currentList}}<span class="closeSelection"><button ng-click="lists.primary.currentList = null">X</button></span>
              </div>

              <messages-primary ng-show="dispatch.primary.currentTab === 'messages'"></messages-primary>
              <lists-primary ng-show="dispatch.primary.currentTab === 'lists'"></lists-primary>
              <events-primary ng-show="dispatch.primary.currentTab === 'events'"></events-primary>
              <group-primary ng-show="dispatch.primary.currentTab === 'group'"></group-primary>-->
            </div><div id="mainViewSecondary" ng-controller="SecondaryController">
            <tabs-view></tabs-view>
             <!--  <div id="toolBarSecondary" class="toolBar">
                <div class="groupTabButton tabButton" ng-click="changeSecondaryTab('group')">GROUP</div>
                <div ng-show="groups.secondary.currentGroup" class="eventsTabButton tabButton" ng-click="changeSecondaryTab('events')">EVENTS</div>
                <div ng-show="groups.secondary.currentGroup" class="listsTabButton tabButton" ng-click="changeSecondaryTab('lists')">LISTS</div>
                <div class="messagesTabButton tabButton" ng-click="changeSecondaryTab('messages')">MESSAGES</div>
              </div>

              <div id="selectedGroupSecondary"  ng-show="groups.secondary.currentGroup">
              {{groups.secondary.currentGroup}}<span class="closeSelection"><button ng-click="groups.secondary.currentGroup = null">X</button></span>
              </div>
              <div id="selectedEventSecondary"  ng-show="events.secondary.currentEvent">
              {{events.secondary.currentEvent}}<span class="closeSelection"><button ng-click="events.secondary.currentEvent = null">X</button></span>
              </div>
               <div id="selectedListSecondary"  ng-show="lists.secondary.currentList">
              {{lists.secondary.currentList}}<span class="closeSelection"><button ng-click="lists.secondary.currentList = null">X</button></span>
              </div>

              <messages-dir ng-show="dispatch.secondary.currentTab === 'messages'"></messages-dir>
              <lists-dir ng-show="dispatch.secondary.currentTab === 'lists'"></lists-dir>
              <events-dir ng-show="dispatch.secondary.currentTab === 'events'"></events-dir>
              <group-dir ng-show="dispatch.secondary.currentTab === 'group'"></group-dir> -->
            </div>
          </div>

        </div>
  </body>

  <script src="./services/services.js"></script>
  <script src="./services/userService.js"></script>
  <script src="./services/listService.js"></script>
  <script src="./services/groupService.js"></script>
  <script src="./services/eventService.js"></script>
  <script src="./services/guestService.js"></script>
  <script src="./client.js"></script>
  <script src="./controllers/controllers.js"></script>
  <script src="./controllers/userController.js"></script>
  <script src="./controllers/listController.js"></script>
  <script src="./controllers/eventController.js"></script>
  <script src="./controllers/groupController.js"></script>
  <script src="./controllers/navController.js"></script>
  <script src="./controllers/fileInputController.js"></script>
  <script src="./controllers/guestController.js"></script>
  <script src="./scripts/papaparse.min.js"></script>

  <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
</html>
